<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Cadastro e Consulta</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Seu estilo aqui, você pode manter o que já tinha... */
    </style>
</head>
<body>
    <div class="main" id="app">
        <center>
            <h1>Cadastro de Dados e Consulta</h1>
        </center>
        <br><br>

        <div class="row">
            <!-- Formulário de Cadastro -->
            <div class="col-md-6">
                <div class="series">
                    <h3>Cadastro de Dados Pessoais</h3>
                    <form @submit.prevent="cadastrar">
                        <div>
                            <label for="nome">Nome:</label>
                            <input type="text" id="nome" v-model="dados.nome" placeholder="Digite seu nome" required />
                        </div>
                        <div>
                            <label for="idade">Idade:</label>
                            <input type="number" id="idade" v-model="dados.idade" placeholder="Digite sua idade" required />
                        </div>
                        <div>
                            <label for="email">Email:</label>
                            <input type="email" id="email" v-model="dados.email" placeholder="Digite seu e-mail" required />
                        </div>
                        <br>
                        <button type="submit" class="btn btn-primary">Cadastrar</button>
                    </form>
                </div>
            </div>

            <!-- Resultados -->
            <div class="col-md-6">
                <div class="resultado">
                    <h3>Dados Cadastrados:</h3>
                    <p><strong>Nome:</strong> {{ dados.nome }}</p>
                    <p><strong>Idade:</strong> {{ dados.idade }}</p>
                    <p><strong>Email:</strong> {{ dados.email }}</p>
                    <p><strong>Termos:</strong> {{ dados.termos ? 'Aceito' : 'Não Aceito' }}</p>
                    <p><strong>Valor do Termo:</strong> {{ calcularTermo(dados.idade) }}</p>
                    <p><strong>Classificação de Idade:</strong> {{ classificarIdade(dados.idade) }}</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                dados: {
                    nome: '',
                    idade: '',
                    email: '',
                    termos: true,  // Supondo que o termo seja aceito por padrão
                },
            },
            methods: {
                cadastrar() {
                    // Aqui você deve conectar com a API para salvar os dados
                    // Este é um exemplo simples, você pode fazer um fetch() ou axios para enviar os dados ao servidor

                    const usuario = {
                        nome: this.dados.nome,
                        idade: this.dados.idade,
                        email: this.dados.email,
                        termos: this.dados.termos
                    };

                    fetch('cadastrar_usuario.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(usuario)
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Cadastro realizado com sucesso:', data);
                        alert('Cadastro realizado com sucesso!');
                    })
                    .catch((error) => {
                        console.error('Erro ao cadastrar:', error);
                        alert('Erro ao realizar o cadastro.');
                    });
                },
                calcularTermo(idade) {
                    if (idade < 18) {
                        return 'Termo de consentimento necessário';
                    }
                    return 'Termo aprovado';
                },
                classificarIdade(idade) {
                    if (idade < 18) {
                        return 'Jovem';
                    } else if (idade >= 18 && idade <= 60) {
                        return 'Adulto';
                    } else {
                        return 'Idoso';
                    }
                }
            }
        });
    </script>
</body>
</html>
